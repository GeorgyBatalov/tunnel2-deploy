# ⚠️ TEST/DEV ONLY - These are non-production test tokens for local development
# Real production secrets should NEVER be committed to git
#
# IMPORTANT: Token below is a LOCAL DEV token that only works with local Vault instance.
# It's safe to have in git for dev environment. Production tokens MUST NEVER be committed.
#
# Vault DISABLED in dev environment - using .env.secrets instead
# Leave Vault__Token empty or comment it out to disable Vault
Vault__Address=http://vault:8200
#Vault__Token=
ProxyEntry__EntryId=e1

# JWT Validator - public key will be loaded from mounted volume /app/secrets/tunnel_public.pem
# The application code should read this file at runtime
JwtValidator__Issuer=tunnel-server

# TLS Certificate for uplink connection (PEM format)
ProxyEntry__UseTunnelTls=true
ProxyEntry__CertificatePath=/app/certs/tunnel_server.crt
ProxyEntry__CertificateKeyPath=/app/certs/tunnel_server.key

# Dev/Test feature flags (MUST be false or omitted in production!)
PROXY_ENTRY_IS_TEST_ENV=true  # Enables path-based routing: /session/{guid}/path

# Kestrel performance tuning for high load (1000+ RPS)
Kestrel__Limits__MaxConcurrentConnections=1000
Kestrel__Limits__MaxConcurrentUpgradedConnections=1000
Kestrel__Limits__KeepAliveTimeout=00:02:00
Kestrel__Limits__RequestHeadersTimeout=00:00:30

# Phase 8 Week 3-4: OpenTelemetry OTLP exporter to Jaeger
OpenTelemetry__Enabled=true
OpenTelemetry__OtlpEndpoint=http://jaeger:4317

# TRACE-level logging for dev environment (detailed routing and session resolution logs)
Logging__LogLevel__Default=Trace
Logging__LogLevel__Microsoft=Information
Logging__LogLevel__Microsoft.EntityFrameworkCore=Warning
Logging__LogLevel__Tunnel2.ProxyEntry.ConsoleApp.Services.TunnelLifecycleReporter=Debug
Logging__LogLevel__Tunnel2.ProxyEntry.ConsoleApp.HostedServices.ProxyEntryHeartbeat=Debug

# Прочие настройки (не секретные) — держим пустыми и перекрываем из Vault
# ProxyEntry__EntryId=e1
# ProxyEntry__ListenPort=12000
# TunnelServer__PublicDomainUri=