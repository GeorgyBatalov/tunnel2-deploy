# ⚠️ TEST/DEV ONLY - These are non-production test tokens for local development
# Real production secrets should NEVER be committed to git
#
# IMPORTANT: Token below is a LOCAL DEV token that only works with local Vault instance.
# It's safe to have in git for dev environment. Production tokens MUST NEVER be committed.
#
# Vault для .NET: "Vault": { "Address": "...", "Token": "..." }
TUNNEL_Vault__Address=http://vault:8200
TUNNEL_Vault__Token=hvs.rPXvqRH1wXbY7UBgW3NX9bTv  # gitleaks:allow - LOCAL DEV TOKEN ONLY

# Phase 7.2: ProxyEntry configuration with TCP support
# Entry 0: e1 with HTTP + TCP support (tcp1.tunnel.local, ports 20000-20999)
TUNNEL_ProxyEntries__Entries__0__InstanceId=e1
TUNNEL_ProxyEntries__Entries__0__PublicHost=e1.tunnel.local
TUNNEL_ProxyEntries__Entries__0__Tcp__Host=tcp1.tunnel.local
TUNNEL_ProxyEntries__Entries__0__Tcp__PortRangeFrom=20000
TUNNEL_ProxyEntries__Entries__0__Tcp__PortRangeTo=20999

# Dev/Test feature flags (MUST be false or omitted in production!)
TUNNEL_SERVER_IS_TEST_ENV=true  # Enables DevSessionId: custom session IDs from clients

# Override PublicDomainUri for local development (env vars have highest priority)
TUNNEL_TunnelServer__PublicDomainUri=http://localhost:12000

# TRACE-level logging for dev environment (detailed pipeline execution logs)
TUNNEL_Logging__LogLevel__Default=Trace
TUNNEL_Logging__LogLevel__Microsoft=Information
TUNNEL_Logging__LogLevel__Microsoft.EntityFrameworkCore=Warning

# Phase 5: PostgreSQL connection string - берется из Vault!
# ConnectionStrings__PostgreSQL=Host=postgres;Port=5432;Database=tunnel2;Username=admin;Password=admin123

# Kestrel performance tuning for high load (1000+ RPS)
TUNNEL_Kestrel__Limits__MaxConcurrentConnections=1000
TUNNEL_Kestrel__Limits__MaxConcurrentUpgradedConnections=1000
TUNNEL_Kestrel__Limits__KeepAliveTimeout=00:02:00
TUNNEL_Kestrel__Limits__RequestHeadersTimeout=00:00:30

# Phase 8 Week 3-4: OpenTelemetry OTLP exporter to Jaeger
TUNNEL_OpenTelemetry__Enabled=true
TUNNEL_OpenTelemetry__OtlpEndpoint=http://jaeger:4317

# Legacy Fallback: cabinet-api for license queries (Phase 4.5 migration support)
# If TunnelApiAddress is set - fallback is enabled, if empty - disabled
TUNNEL_LegacyFallback__TunnelApiAddress=http://cabinet_api:9090

# Если нужно: другие не-секретные опции с пустыми значениями (перекроются Vault'ом)
# TokenOptions__Issuer=
# TokenOptions__DefaultTtlMinutes=
# Redis__ConnectionString=
# Rabbit__Host=