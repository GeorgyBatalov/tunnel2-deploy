# ===================================================================
# Tunnel2 ProxyEntry - Production Environment
# ===================================================================
# IMPORTANT: This file contains PRODUCTION configuration
# Secrets are loaded from Vault at runtime
# ===================================================================

# ===== Vault Configuration =====
# Vault address (internal docker network)
Vault__Address=http://vault:8200

# Vault token (SET THIS FROM .env FILE AFTER VAULT INITIALIZATION)
# DO NOT hardcode production token here!
Vault__Token=${VAULT_ROOT_TOKEN}

# ===== TunnelServer Configuration =====
# TunnelServer address for uplink connections (internal docker network)
TunnelServer__Host=tunnel_server
TunnelServer__Port=12002

# ===== ProxyEntry Configuration =====
# Unique identifier for this ProxyEntry instance (must match TunnelServer config)
ProxyEntry__Id=e1

# HTTP listener configuration
ProxyEntry__HttpPort=80

# Uplink listener configuration (for client connections)
ProxyEntry__UplinkPort=12001

# TCP public ports range (10000 ports for TCP tunneling)
ProxyEntry__TcpPortRangeStart=40000
ProxyEntry__TcpPortRangeEnd=49999

# ===== Performance Tuning =====
# Kestrel limits for high load
Kestrel__Limits__MaxConcurrentConnections=5000
Kestrel__Limits__MaxConcurrentUpgradedConnections=5000
Kestrel__Limits__KeepAliveTimeout=00:02:00
Kestrel__Limits__RequestHeadersTimeout=00:00:30

# ===== Logging Configuration =====
# Serilog minimum level
Serilog__MinimumLevel__Default=Information
Serilog__MinimumLevel__Override__Microsoft=Warning
Serilog__MinimumLevel__Override__System=Warning

# ===== ASP.NET Core Environment =====
ASPNETCORE_ENVIRONMENT=Production
